<nav class="navbar navbar-expand-lg navbar-light fixed-top">
    <div class="container">
        <a class="navbar-brand" href="/">
            <i class="fas fa-utensils me-2"></i>Smart Tiffin
        </a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
                <li class="nav-item">
                    <a class="nav-link <%= (typeof page !== 'undefined' && page === 'home') ? 'active' : '' %>" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">About Us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">How It Works</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Menu / Plans</a>
                </li>
                <% if (user && user.role === 'customer') { %>
                <li class="nav-item">
                    <a class="nav-link" href="/become-chef">Become a Chef</a>
                </li>
                <% } %>
                <li class="nav-item">
                    <a class="nav-link" href="#">Contact Us</a>
                </li>
            </ul>

            <div class="navbar-nav">
                <% if (user) { %>
                    <div class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown" style="
                            font-weight: 500;
                            padding: 0.5rem 1rem;
                            margin: 0 0.2rem;
                            border-radius: 0.375rem;
                            transition: all 0.3s ease;
                            color: #2d3748 !important;
                            text-decoration: none;
                        ">
                            <img src="https://ui-avatars.com/api/?name=<%= user.name %>&background=2E8B57&color=fff" 
                                 alt="Profile" class="rounded-circle me-2" width="32" height="32">
                            <span class="me-2"><%= user.name %></span>
                            <span class="badge bg-<%= user.role === 'admin' ? 'danger' : user.role === 'cook' ? 'warning' : 'success' %>" style="
                                font-size: 0.7rem;
                                padding: 0.25rem 0.5rem;
                            ">
                                <%= user.role %>
                            </span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="/<%= user.role %>-dashboard" style="
                                padding: 0.5rem 1rem;
                                color: #2d3748;
                                text-decoration: none;
                                display: block;
                            ">
                                <i class="fas fa-tachometer-alt me-2"></i>My Dashboard
                            </a></li>
                            <% if (user.role === 'customer') { %>
                                <li><a class="dropdown-item" href="/become-chef" style="
                                    padding: 0.5rem 1rem;
                                    color: #2d3748;
                                    text-decoration: none;
                                    display: block;
                                ">
                                    <i class="fas fa-utensils me-2"></i>Become a Chef
                                </a></li>
                            <% } %>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="/logout" style="
                                padding: 0.5rem 1rem;
                                color: #2d3748;
                                text-decoration: none;
                                display: block;
                            ">
                                <i class="fas fa-sign-out-alt me-2"></i>Logout
                            </a></li>
                        </ul>
                    </div>
                <% } else { %>
                    <a class="nav-link btn btn-login me-2" href="/login" style="
                        border: 1px solid #2e8b57;
                        color: #2e8b57;
                        padding: 0.5rem 1.5rem;
                        border-radius: 4px;
                        font-weight: 500;
                        transition: all 0.3s ease;
                        text-decoration: none;
                    " onmouseover="this.style.backgroundColor='#2e8b57'; this.style.color='white'" 
                       onmouseout="this.style.backgroundColor='transparent'; this.style.color='#2e8b57'">
                        Login
                    </a>
                    <a class="nav-link btn btn-signup" href="/signup" style="
                        background-color: #2e8b57;
                        color: white;
                        padding: 0.5rem 1.5rem;
                        border-radius: 4px;
                        font-weight: 500;
                        transition: all 0.3s ease;
                        border: none;
                        text-decoration: none;
                    " onmouseover="this.style.backgroundColor='#4caf7d'" 
                       onmouseout="this.style.backgroundColor='#2e8b57'">
                        Sign Up
                    </a>
                <% } %>
            </div>
        </div>
    </div>
</nav>

<style>
.navbar {
    padding: 1rem 0;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    background-color: white;
}

.navbar-brand {
    font-size: 1.6rem;
    font-weight: 700;
    color: #2e8b57 !important;
    text-decoration: none;
}

.navbar-nav .nav-link {
    font-weight: 500;
    padding: 0.5rem 1rem;
    margin: 0 0.2rem;
    border-radius: 0.375rem;
    transition: all 0.3s ease;
    color: #2d3748 !important;
    text-decoration: none;
}

.navbar-nav .nav-link:hover {
    background-color: rgba(46, 139, 87, 0.1);
    color: #2e8b57 !important;
}

.navbar-nav .nav-link.active {
    background-color: #2e8b57;
    color: white !important;
}

/* Dropdown styles */
.dropdown-menu {
    border: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
}

.dropdown-item:hover {
    background-color: rgba(46, 139, 87, 0.1);
    color: #2e8b57 !important;
}

/* Navbar scroll effect */
.navbar-scrolled {
    padding: 0.5rem 0 !important;
    background: rgba(255, 255, 255, 0.95) !important;
}
</style>

<script>
// Navbar scroll effect
window.addEventListener('scroll', function() {
    const navbar = document.querySelector('.navbar');
    if (window.scrollY > 100) {
        navbar.classList.add('navbar-scrolled');
    } else {
        navbar.classList.remove('navbar-scrolled');
    }
});
</script>